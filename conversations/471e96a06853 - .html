<!DOCTYPE html> <html lang="en-US" dir="ltr"><!--
 Page saved with SingleFile 
 url: https://gemini.google.com/share/471e96a06853 
 saved date: Fri Aug 15 2025 19:50:17 GMT+0000 (Coordinated Universal Time)
--><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1,minimum-scale=1,width=device-width,interactive-widget=resizes-content"><meta name="color-scheme" content="only"><meta name="google-site-verification" content="NDfDvTdbFxsd1TbRRZVQZULBTRT2-fatyuQ1TT8gack"><meta name="twitter:card" content="summary_large_image"><meta property="og:site_name" content="Gemini"><title>‎Gemini - </title><meta name="robots" content="noindex, nofollow"><meta property="og:title" content="‎Gemini - "><meta name="twitter:title" content="‎Gemini - "><meta property="og:image" itemprop="image" content="https://lh3.googleusercontent.com/gg/AAHar4erVpMpBdbjuGDrjRp0zb4QlsGLb3EzBHR39DN3z5UjyhHjuUrxzmjphGZCp2kq7vWNJQZrsv4ZltiBfz0BQTDTE9mFWZaveo5A5pWa4N9Oh-2_qiWrmAYxTpm2BIKEf4mYj3C4NAnMgXWLAfNiBaOolsaLqADtxVRv4pU7Jsn_cFPuQag=s1200"><meta name="twitter:image" content="https://lh3.googleusercontent.com/gg/AAHar4erVpMpBdbjuGDrjRp0zb4QlsGLb3EzBHR39DN3z5UjyhHjuUrxzmjphGZCp2kq7vWNJQZrsv4ZltiBfz0BQTDTE9mFWZaveo5A5pWa4N9Oh-2_qiWrmAYxTpm2BIKEf4mYj3C4NAnMgXWLAfNiBaOolsaLqADtxVRv4pU7Jsn_cFPuQag=s1200"><meta name="description" content="Created with Gemini"><meta property="og:description" content="Created with Gemini"><meta property="og:url" content="https://gemini.google.com/share/471e96a06853"><meta name="referrer" content="no-referrer"></head><body class="theme-host light-theme old-google-sans-type-scale"><style data-href="https://www.gstatic.com/_/mss/boq-bard-web/_/ss/k=boq-bard-web.BardChatUi.P9huht0xhJ0.L.B1.O/am=H-FIp84F-P_ee___f--5AoAQAIDA/d=1/ed=1/rs=AL3bBk1y10t72IdH_sLR9EzVcnzRA5UUGA/m=_b" nonce="n5ejoA3YhdTrrHteTj5qfg">@media screen and (max-width:960px){}@media screen and (min-width:960px){}@media screen and (min-width:960px){}@media (max-width:768px){}html{}.gds-body-l{font-family:"Google Sans Flex","Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height);font-variation-settings:var(--gem-sys-typography-type-scale--body-l-font-width)}.gds-title-s{font-family:"Google Sans Flex","Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height);font-variation-settings:var(--gem-sys-typography-type-scale--title-s-font-width)}.cdk-visually-hidden{-webkit-appearance:none;-moz-appearance:none}@media (pointer:fine){::-webkit-scrollbar,::-webkit-scrollbar-corner{background:transparent;height:12px;width:12px}::-webkit-scrollbar-thumb{background:content-box transparent;border:2px solid transparent;border-radius:var(--gem-sys-shape--corner-full);min-height:48px;min-width:48px}@supports not (scrollbar-color:auto){:hover{will-change:scrollbar-color}}:hover::-webkit-scrollbar-thumb{background:content-box var(--gem-sys-color--surface-container-highest)}::-webkit-scrollbar-thumb:active,::-webkit-scrollbar-thumb:hover{background:content-box var(--gem-sys-color--outline-variant)}::-webkit-scrollbar-button{height:0;width:0}@supports not (selector(::-webkit-scrollbar)){*{scrollbar-color:transparent transparent;scrollbar-gutter:auto;scrollbar-width:thin}*:hover{scrollbar-color:var(--gem-sys-color--surface-container-highest) transparent}}}html{}@media (forced-colors:active){:root{}}:focus:not(:focus-visible){}@media screen and (min-width:600px){}@media screen and (min-width:600px){}@media screen and (max-width:600px){}@media screen and (max-width:600px){}@keyframes animateGradient{0%{background-position:200%}100%{background-position:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@media screen and (min-width:600px){}@media screen and (max-width:600px){}@keyframes trigger-fade-out{from{opacity:1}to{opacity:0}}@keyframes backdrop-opacity{from{opacity:0}to{opacity:1}}@media (max-width:768px){}@media (max-width:768px){}@media (max-width:768px){}@media (max-width:768px){}:root .light-theme{--bard-color-code-comment:#5f6368;--bard-color-code-literal:#b55908;--bard-color-code-string:#188038;--bard-color-code-quotes-and-meta:#1967d2;--bard-color-code-keyword:#8430ce;--bard-color-share-link:#0842a0;--bard-color-onegooglebar-product-controls:#5f6368;}:where(.theme-host){color-scheme:light;}:where(.theme-host) .cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}:where(.theme-host):where(.dark-theme){color-scheme:dark;}:where(.theme-host){--gem-sys-color--on-primary:#fff;--gem-sys-color--on-secondary-container:#004a77;--gem-sys-color--on-surface:#1b1c1d;--gem-sys-color--on-surface-variant:#575b5f;--gem-sys-color--outline-variant:#c4c7c5;--gem-sys-color--primary:#0b57d0;--gem-sys-color--secondary-container:#c2e7ff;--gem-sys-color--surface:#fff;--gem-sys-color--surface-container:#f0f4f9;--gem-sys-color--surface-container-high:#e9eef6;--gem-sys-color--surface-container-highest:#dde3ea;--gem-sys-color--tertiary-container:#c4eed0;--gem-sys-shape--corner-extra-large:28px;--gem-sys-shape--corner-extra-small:4px;--gem-sys-shape--corner-full:9999px;--gem-sys-shape--corner-large:16px;--gem-sys-spacing--l:16px;--gem-sys-spacing--m:12px;--gem-sys-spacing--s:8px;--gem-sys-spacing--xs:4px;--gem-sys-spacing--xxl:24px;--gem-sys-typography-markdown-type-scale--p-font-size:1rem;--gem-sys-typography-markdown-type-scale--p-font-tracking:0rem;--gem-sys-typography-markdown-type-scale--p-font-weight:400;--gem-sys-typography-markdown-type-scale--p-font-width:"wdth"95;--gem-sys-typography-markdown-type-scale--p-line-height:1.75rem;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-font-width:"wdth"95;--gem-sys-typography-type-scale--body-l-line-height:1.5rem;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-font-width:"wdth"95;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--title-l-font-size:1.375rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:400;--gem-sys-typography-type-scale--title-l-font-width:"wdth"100;--gem-sys-typography-type-scale--title-l-line-height:1.75rem;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-font-width:"wdth"95;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;}@media screen and (max-width:960px){:where(.theme-host){--gem-sys-typography-markdown-type-scale--p-font-size:1rem;--gem-sys-typography-markdown-type-scale--p-font-tracking:0rem;--gem-sys-typography-markdown-type-scale--p-font-weight:400;--gem-sys-typography-markdown-type-scale--p-font-width:"wdth"95;--gem-sys-typography-markdown-type-scale--p-line-height:1.625rem;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-font-width:"wdth"95;--gem-sys-typography-type-scale--body-l-line-height:1.5rem;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-font-width:"wdth"95;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--title-l-font-size:1.25rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:400;--gem-sys-typography-type-scale--title-l-font-width:"wdth"100;--gem-sys-typography-type-scale--title-l-line-height:1.625rem;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-font-width:"wdth"95;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;}}:where(.theme-host):where(.dark-theme){--gem-sys-color--on-primary:#062e6f;--gem-sys-color--on-secondary-container:#c2e7ff;--gem-sys-color--on-surface:#fff;--gem-sys-color--on-surface-variant:#a2a9b0;--gem-sys-color--outline-variant:#4a5050;--gem-sys-color--primary:#a8c7fa;--gem-sys-color--secondary-container:#004a77;--gem-sys-color--surface:#1b1c1d;--gem-sys-color--surface-container:#282a2c;--gem-sys-color--surface-container-high:#333537;--gem-sys-color--surface-container-highest:#3d3f42;--gem-sys-color--tertiary-container:#0f5223;}:where(.theme-host):where(.old-google-sans-type-scale){--gem-sys-typography-markdown-type-scale--p-font-size:1rem;--gem-sys-typography-markdown-type-scale--p-font-tracking:0rem;--gem-sys-typography-markdown-type-scale--p-font-weight:400;--gem-sys-typography-markdown-type-scale--p-font-width:"wdth"100;--gem-sys-typography-markdown-type-scale--p-line-height:1.75rem;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-font-width:"wdth"100;--gem-sys-typography-type-scale--body-l-line-height:1.75rem;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-font-width:"wdth"100;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--title-l-font-size:1.25rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:500;--gem-sys-typography-type-scale--title-l-font-width:"wdth"100;--gem-sys-typography-type-scale--title-l-line-height:1.75rem;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-font-width:"wdth"100;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;}@media screen and (max-width:960px){:where(.theme-host):where(.old-google-sans-type-scale){--gem-sys-typography-markdown-type-scale--p-font-size:1rem;--gem-sys-typography-markdown-type-scale--p-font-tracking:0rem;--gem-sys-typography-markdown-type-scale--p-font-weight:400;--gem-sys-typography-markdown-type-scale--p-font-width:"wdth"100;--gem-sys-typography-markdown-type-scale--p-line-height:1.625rem;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-font-width:"wdth"100;--gem-sys-typography-type-scale--body-l-line-height:1.625rem;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-font-width:"wdth"100;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--title-l-font-size:1.25rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:500;--gem-sys-typography-type-scale--title-l-font-width:"wdth"100;--gem-sys-typography-type-scale--title-l-line-height:1.625rem;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-font-width:"wdth"100;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;}}@media screen and (min-width:960px){}chat-app{z-index:1}html{height:100%;width:100%;overflow:hidden}body{color:var(--gem-sys-color--on-surface);background-color:var(--gem-sys-color--surface);margin:0;height:100%;width:100%;display:flex;flex-direction:column;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style><style data-font-stylesheet nonce="n5ejoA3YhdTrrHteTj5qfg"></style><style nonce="n5ejoA3YhdTrrHteTj5qfg">@-webkit-keyframes gb__a{0%{opacity:0}50%{opacity:1}}@keyframes gb__a{0%{opacity:0}50%{opacity:1}}@media (forced-colors:active){}@media (max-width:350px){}@media screen and (max-width:319px){}@media screen and (max-width:319px){}@media (-webkit-min-device-pixel-ratio:1.25),(min-resolution:1.25dppx),(min-device-pixel-ratio:1.25){}</style><!-- Google Tag Manager --><!-- End Google Tag Manager --><style nonce="n5ejoA3YhdTrrHteTj5qfg"></style><link rel="canonical" href="https://gemini.google.com/share/471e96a06853"><style nonce="n5ejoA3YhdTrrHteTj5qfg" type="text/css" data-late-css></style><style type="text/css">@media (forced-colors:active){}@media (max-width:383.98px){}@media (min-width:600px) and (max-width:767.98px){}@media (min-width:1920px){}@media (min-width:1280px) and (max-width:1919.98px){}@media (min-width:960px) and (max-width:1279.98px){}@media (min-width:600px) and (max-width:959.98px){}@media (max-width:599.98px){}@media (prefers-reduced-motion){}</style><style>.side-nav-menu-button[_ngcontent-ng-c514563478]{position:fixed;top:0;min-height:48px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--bard-color-onegooglebar-product-controls);-webkit-margin-start:16px;-moz-margin-start:16px;margin-inline-start:16px;z-index:3;pointer-events:none}.side-nav-menu-button[_ngcontent-ng-c514563478]>*[_ngcontent-ng-c514563478]{pointer-events:auto}.side-nav-menu-button.with-pill-ui[_ngcontent-ng-c514563478]{margin-top:8px}@media only screen and (max-width:768px){.side-nav-menu-button[_ngcontent-ng-c514563478]{-webkit-margin-start:var(--gem-sys-spacing--m);-moz-margin-start:var(--gem-sys-spacing--m);margin-inline-start:var(--gem-sys-spacing--m)}}@media only screen and (max-width:960px){.side-nav-menu-button[_ngcontent-ng-c514563478]{z-index:1}}@media only screen and (min-width:960px){.side-nav-menu-button[_ngcontent-ng-c514563478]{-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}}@media screen and (min-width:960px){.side-nav-menu-button[_ngcontent-ng-c514563478] bard-mode-switcher[_ngcontent-ng-c514563478]{-webkit-margin-start:64px;-moz-margin-start:64px}.side-nav-menu-button[_ngcontent-ng-c514563478] bard-mode-switcher.no-menu-button[_ngcontent-ng-c514563478]{-webkit-margin-start:2px;-moz-margin-start:2px;margin-inline-start:2px}}[_nghost-ng-c514563478]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content[_ngcontent-ng-c514563478]{display:contents;height:100%}.chat-app[_ngcontent-ng-c514563478],.main-content[_ngcontent-ng-c514563478]{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative}.content-container[_ngcontent-ng-c514563478]{overflow-y:auto;position:absolute;inset:0}</style><style></style><style>bard-sidenav-content[_ngcontent-ng-c2318972578]{color:var(--gem-sys-color--on-surface);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:hidden}bard-sidenav-content[_ngcontent-ng-c2318972578] .desktop-ogb-buffer[_ngcontent-ng-c2318972578]{margin-top:12px;padding:6px 0;height:36px;margin-bottom:10px}bard-sidenav-content[_ngcontent-ng-c2318972578] .content-wrapper[_ngcontent-ng-c2318972578]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow:auto}chat-notifications[_ngcontent-ng-c2318972578]{display:none}</style><style></style><style></style><style>[_nghost-ng-c3522183994]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100%}</style><style>[_nghost-ng-c24741362]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:100%}</style><style>@media only screen and (max-width:452px){}</style><style nonce="n5ejoA3YhdTrrHteTj5qfg" type="text/css" data-late-css>body{counter-reset:katexEqnNo mmlEqnNo}</style><style>[_nghost-ng-c3604425988]{display:block;min-height:100%}.share-landing-page_content[_ngcontent-ng-c3604425988]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}@media only screen and (min-width:768px){}</style><style>.bard-logo-container[_ngcontent-ng-c2384344551]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--xs)}.bard-logo-container.logo-only[_ngcontent-ng-c2384344551]{padding:6px var(--gem-sys-spacing--s)}@media only screen and (min-width:960px){}@media only screen and (min-width:960px){}</style><style>.logo[_ngcontent-ng-c1291545120]{cursor:pointer;font-family:Google Sans Flex,Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-l-font-size);letter-spacing:var(--gem-sys-typography-type-scale--title-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-l-line-height);font-variation-settings:var(--gem-sys-typography-type-scale--title-l-font-width);font-weight:400;-webkit-margin-end:4px;-moz-margin-end:4px;margin-inline-end:4px}.bard-text.enable-aurora[_ngcontent-ng-c1291545120]{color:var(--gem-sys-color--on-surface-variant);font-weight:500}</style><style>/*!-----------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/vscode/blob/main/LICENSE.txt
 *-----------------------------------------------------------*/@keyframes codicon-spin{to{transform:rotate(1turn)}}@keyframes monaco-findInput-highlight-0{0%{background:rgba(253,255,0,.8)}to{background:transparent}}@keyframes monaco-findInput-highlight-1{0%{background:rgba(253,255,0,.8)}99%{background:transparent}}@keyframes monaco-findInput-highlight-dark-0{0%{background:hsla(0,0%,100%,.44)}to{background:transparent}}@keyframes monaco-findInput-highlight-dark-1{0%{background:hsla(0,0%,100%,.44)}99%{background:transparent}}@keyframes progress{0%{transform:translateX(0) scaleX(1)}50%{transform:translateX(2500%) scaleX(3)}to{transform:translateX(4900%) scaleX(1)}}:root{}@keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@keyframes monaco-cursor-expand{0%,20%{transform:scaleY(1)}80%,to{transform:scaleY(0)}}@keyframes fadein{0%{opacity:0;visibility:visible}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}</style><style>.chat-history[_ngcontent-ng-c141276602],.top-container[_ngcontent-ng-c141276602]{max-width:47.5rem;width:100%;-moz-box-sizing:border-box;box-sizing:border-box;margin:0 auto}.chat-history[_ngcontent-ng-c141276602],.link-flag[_ngcontent-ng-c141276602],.title-link[_ngcontent-ng-c141276602],[_nghost-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.share-viewer_header-container-old[_ngcontent-ng-c141276602]{width:100%}.share-viewer_chat-container[_ngcontent-ng-c141276602]{width:100%}.share-viewer_footer[_ngcontent-ng-c141276602]{position:fixed;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.top-container[_ngcontent-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1rem}@media only screen and (max-width:768px){.top-container[_ngcontent-ng-c141276602]{padding-inline:1rem}}.share-title-section[_ngcontent-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.title-link[_ngcontent-ng-c141276602]{color:var(--gem-sys-color--on-surface)}.link-flag[_ngcontent-ng-c141276602]{-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:1rem 0;margin:.75rem 0}@media only screen and (min-width:768px){.link-flag[_ngcontent-ng-c141276602]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row}}.link-flag[_ngcontent-ng-c141276602] .share-link[_ngcontent-ng-c141276602]{min-height:1.5rem;color:var(--bard-color-share-link);font-weight:500;word-break:break-word}.link-action-buttons[_ngcontent-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0;-webkit-margin-start:0;-moz-margin-start:0;margin-inline-start:0;margin-block:-.75rem}@media only screen and (min-width:768px){.link-action-buttons[_ngcontent-ng-c141276602]{-webkit-margin-start:1rem;-moz-margin-start:1rem;margin-inline-start:1rem}}@media only screen and (max-width:768px){}.chat-history[_ngcontent-ng-c141276602]{padding-inline:1rem}@media only screen and (min-width:768px){.chat-history[_ngcontent-ng-c141276602]:not(.url-preview){padding-inline:0}}.share-viewer_legal-links[_ngcontent-ng-c141276602]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-block:1rem 7.5rem;padding-inline:1rem;z-index:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}@media screen and (min-width:960px){.share-viewer_legal-links[_ngcontent-ng-c141276602]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}}.publish-time[_ngcontent-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:0 1rem;overflow:hidden}.publish-time-mode[_ngcontent-ng-c141276602],.publish-time-text[_ngcontent-ng-c141276602]{display:inline-block}.publish-time-text[_ngcontent-ng-c141276602]{white-space:nowrap}.publish-time-text[_ngcontent-ng-c141276602]:before{content:"•";display:inline-block;width:1rem;text-align:center;-webkit-margin-start:-1rem;-moz-margin-start:-1rem;margin-inline-start:-1rem}</style><style>[_nghost-ng-c141276602]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[_nghost-ng-c141276602]{}@media only screen and (min-width:768px){[_nghost-ng-c141276602]{}}@media only screen and (min-width:768px) and (max-width:75rem){}@media only screen and (min-width:75rem){}@media only screen and (min-width:768px) and (max-width:75rem){}@media only screen and (min-width:75rem){}@media only screen and (min-width:768px) and (max-width:75rem){}@media only screen and (min-width:75rem){}@media only screen and (min-width:768px){}@media only screen and (min-width:768px){}@media only screen and (min-width:768px){}@media only screen and (max-width:768px){}@media only screen and (min-width:768px){}@media only screen and (min-width:768px){}@media screen and (min-width:960px){}@media only screen and (min-width:768px){}</style><style></style><style>@media (forced-colors:active){}</style><style>@media (forced-colors:active){html{}}</style><style></style><style>.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}</style><style></style><style>.share-turn-viewer[_ngcontent-ng-c262668468] user-query[_ngcontent-ng-c262668468]{padding-top:1.5rem}</style><style>[_nghost-ng-c1411839970]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:16px 0;-webkit-padding-start:0;-moz-padding-start:0;padding-inline-start:0}@media screen and (min-width:960px){share-viewer [_nghost-ng-c1411839970]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:8px 0}share-viewer [_nghost-ng-c1411839970] .user-query-container[_ngcontent-ng-c1411839970]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%}}.right-align-content[_ngcontent-ng-c1411839970]>user-query-content[_ngcontent-ng-c1411839970]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row;flex-flow:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:0;width:100%}</style><style>[_nghost-ng-c3309000207]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-padding-start:0;-moz-padding-start:0;padding-inline-start:0}.user-query-container[_ngcontent-ng-c3309000207]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;margin-top:6px;min-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.query-content[_ngcontent-ng-c3309000207]{color:var(--gem-sys-color--on-surface);word-break:break-word;min-width:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.query-text[_ngcontent-ng-c3309000207]{-webkit-font-variant-ligatures:none;-moz-font-variant-ligatures:none;font-variant-ligatures:none;margin-block:0}@media screen and (min-width:960px){share-viewer [_nghost-ng-c3309000207]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:0}share-viewer [_nghost-ng-c3309000207] .user-query-container[_ngcontent-ng-c3309000207]{margin-top:0}}.user-query-bubble-container[_ngcontent-ng-c3309000207]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:0;margin:var(--gem-sys-spacing--m)0 0 0;padding-bottom:0}@media screen and (min-width:960px){.user-query-bubble-container[_ngcontent-ng-c3309000207]{padding-bottom:var(--gem-sys-spacing--xxl)}}.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-text[_ngcontent-ng-c3309000207]{line-height:28px;padding-top:0}.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-text[_ngcontent-ng-c3309000207] .query-text-line[_ngcontent-ng-c3309000207]{margin:0}.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-content[_ngcontent-ng-c3309000207]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-left:52px}.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-content.verticle-align-for-single-line-text[_ngcontent-ng-c3309000207]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-content[_ngcontent-ng-c3309000207]:not(.edit-mode){margin-bottom:var(--gem-sys-spacing--s)}@media screen and (min-width:1280px){.user-query-bubble-container[_ngcontent-ng-c3309000207] .query-content[_ngcontent-ng-c3309000207]{-webkit-margin-start:52px;-moz-margin-start:52px;margin-inline-start:52px;padding:0}}.user-query-bubble-container[_ngcontent-ng-c3309000207] .file-preview-container[_ngcontent-ng-c3309000207]{-webkit-margin-start:52px;-moz-margin-start:52px;margin-inline-start:52px}.horizontal-container[_ngcontent-ng-c3309000207]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.user-query-bubble-with-background[_ngcontent-ng-c3309000207]{padding:var(--gem-sys-spacing--m) var(--gem-sys-spacing--l)}.user-query-bubble-with-background[_ngcontent-ng-c3309000207]:not(.edit-mode){background:var(--gem-sys-color--surface-container-high);border-radius:24px var(--gem-sys-shape--corner-extra-small) 24px 24px;max-width:calc(476px - var(--gem-sys-spacing--m)*2)}</style><style>@-webkit-keyframes _ngcontent-ng-c2240677105_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@keyframes _ngcontent-ng-c2240677105_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@-webkit-keyframes _ngcontent-ng-c2240677105_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@keyframes _ngcontent-ng-c2240677105_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@-webkit-keyframes _ngcontent-ng-c2240677105_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@keyframes _ngcontent-ng-c2240677105_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@-webkit-keyframes _ngcontent-ng-c2240677105_fadein{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c2240677105_fadein{0%{opacity:0}to{opacity:1}}.response-container[_ngcontent-ng-c2240677105]{background-color:var(--gem-sys-color--surface);border-radius:16px;padding:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;padding-bottom:var(--gem-sys-spacing--l)}.response-container[_ngcontent-ng-c2240677105] .response-container-header[_ngcontent-ng-c2240677105]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.response-container[_ngcontent-ng-c2240677105] .response-container-header-controls[_ngcontent-ng-c2240677105]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;min-width:100%}.response-container[_ngcontent-ng-c2240677105] .response-container-footer[_ngcontent-ng-c2240677105]{-webkit-margin-start:-12px;-moz-margin-start:-12px;margin-inline-start:-12px;}.response-container[_ngcontent-ng-c2240677105] .single-draft-response-container[_ngcontent-ng-c2240677105]{font-family:Google Sans Flex,Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height);font-variation-settings:var(--gem-sys-typography-type-scale--title-s-font-width);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-padding-end:8px;-moz-padding-end:8px;padding-inline-end:8px}.response-container[_ngcontent-ng-c2240677105] .tts[_ngcontent-ng-c2240677105]{-webkit-padding-end:40px;-moz-padding-end:40px;padding-inline-end:40px;-webkit-margin-end:-12px;-moz-margin-end:-12px;margin-inline-end:-12px}.response-container-with-gpi[_ngcontent-ng-c2240677105]{min-height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.response-container-header-status[_ngcontent-ng-c2240677105]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:var(--gem-sys-spacing--xs);-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;min-width:0;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.response-container-content[_ngcontent-ng-c2240677105]{padding-top:var(--gem-sys-spacing--xs);-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:auto;min-width:0;min-height:100%}.presented-response-container[_ngcontent-ng-c2240677105]{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;min-height:100%}.presented-response-container[_ngcontent-ng-c2240677105] .avatar-gutter[_ngcontent-ng-c2240677105]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.avatar-component[_ngcontent-ng-c2240677105]{-webkit-margin-end:var(--avatar-component-margin-inline-end,12px);-moz-margin-end:var(--avatar-component-margin-inline-end,12px);margin-inline-end:var(--avatar-component-margin-inline-end,12px);-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}@media screen and (min-width:960px){share-viewer [_nghost-ng-c2240677105] .response-container[_ngcontent-ng-c2240677105]{padding-top:0;padding-bottom:20px;padding-inline:0}share-viewer [_nghost-ng-c2240677105] .response-container[_ngcontent-ng-c2240677105] .response-container-footer[_ngcontent-ng-c2240677105]{}share-viewer [_nghost-ng-c2240677105] .response-container[_ngcontent-ng-c2240677105] .tts[_ngcontent-ng-c2240677105]{-webkit-padding-end:8px;-moz-padding-end:8px;padding-inline-end:8px;-webkit-margin-end:-22px;-moz-margin-end:-22px;margin-inline-end:-22px}share-viewer [_nghost-ng-c2240677105] .avatar-component[_ngcontent-ng-c2240677105]{-webkit-margin-end:20px;-moz-margin-end:20px;margin-inline-end:20px}}</style><style>.response-tts-container[_ngcontent-ng-c1672677784]{position:var(--tts-container-position,absolute);top:var(--tts-container-top,4px);inset-inline-end:0;opacity:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear;pointer-events:none}@media only screen and (min-width:960px){}.playback-speed-menu-trigger[_ngcontent-ng-c1672677784]{position:absolute;inset-inline-end:46px}.playback-speed-menu-trigger.multi[_ngcontent-ng-c1672677784]{top:46px}</style><style>mat-menu{display:none}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}@media (forced-colors:active){}@media (forced-colors:active){}@media (forced-colors:active){}</style><style>@media (forced-colors:active){}</style><style>.bard-avatar[_ngcontent-ng-c3516966969]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;min-height:32px;width:32px;position:relative;-webkit-margin-start:var(--bard-avatar-margin-inline-start,0);-moz-margin-start:var(--bard-avatar-margin-inline-start,0);margin-inline-start:var(--bard-avatar-margin-inline-start,0)}.bard-avatar[_ngcontent-ng-c3516966969] .avatar-container[_ngcontent-ng-c3516966969]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}.avatar[_ngcontent-ng-c3516966969]{height:32px;width:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.avatar_primary_model[_ngcontent-ng-c3516966969]{height:32px;width:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;pointer-events:none}.avatar_primary_model.is-gpi-avatar[_ngcontent-ng-c3516966969]{-webkit-box-align:unset;-webkit-align-items:unset;-moz-box-align:unset;-ms-flex-align:unset;align-items:unset}.avatar_primary_animation[_ngcontent-ng-c3516966969]{width:32px;height:32px}.avatar_spinner_animation[_ngcontent-ng-c3516966969]{position:absolute;top:0;width:32px;height:32px;pointer-events:none;-webkit-transition:opacity .1s .1s;transition:opacity .1s .1s;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}@-webkit-keyframes _ngcontent-ng-c3516966969_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@keyframes _ngcontent-ng-c3516966969_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@-webkit-keyframes _ngcontent-ng-c3516966969_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@keyframes _ngcontent-ng-c3516966969_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@-webkit-keyframes _ngcontent-ng-c3516966969_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@keyframes _ngcontent-ng-c3516966969_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@-webkit-keyframes _ngcontent-ng-c3516966969_fadein{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c3516966969_fadein{0%{opacity:0}to{opacity:1}}</style><style>.markdown[_ngcontent-ng-c2479234063]{color:var(--gem-sys-color--on-surface);font-family:Google Sans Flex,Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-markdown-type-scale--p-font-size);font-weight:var(--gem-sys-typography-markdown-type-scale--p-font-weight);letter-spacing:var(--gem-sys-typography-markdown-type-scale--p-font-tracking);line-height:var(--gem-sys-typography-markdown-type-scale--p-line-height);font-variation-settings:var(--gem-sys-typography-markdown-type-scale--p-font-width);overflow-wrap:break-word;-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px}@media only screen and (max-width:768px){.markdown[_ngcontent-ng-c2479234063]:not(.force-compact-layout){-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}}@media screen and (min-width:768px){.markdown[_ngcontent-ng-c2479234063]:not(.force-compact-layout){line-height:1.75rem;-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}}.markdown[_ngcontent-ng-c2479234063]>:first-child{margin-top:0}.markdown[_ngcontent-ng-c2479234063]>:first-child .code-block{margin-top:0}@media screen and (max-width:768px){}.markdown[_ngcontent-ng-c2479234063] p{margin:0 0 var(--gem-sys-spacing--l);white-space:pre-wrap;word-break:break-word}.markdown[_ngcontent-ng-c2479234063] p:has(+ol),.markdown[_ngcontent-ng-c2479234063] p:has(+ul){margin-bottom:var(--gem-sys-spacing--s)}.markdown[_ngcontent-ng-c2479234063] ol{-webkit-padding-start:1.75rem;-moz-padding-start:1.75rem;padding-inline-start:1.75rem}.markdown[_ngcontent-ng-c2479234063] ul{list-style-type:disc;-webkit-padding-start:1.6875rem;-moz-padding-start:1.6875rem;padding-inline-start:1.6875rem}.markdown[_ngcontent-ng-c2479234063] ol,.markdown[_ngcontent-ng-c2479234063] ul{margin:var(--gem-sys-spacing--s)0}.markdown[_ngcontent-ng-c2479234063] ol li,.markdown[_ngcontent-ng-c2479234063] ol li>p,.markdown[_ngcontent-ng-c2479234063] ul li,.markdown[_ngcontent-ng-c2479234063] ul li>p{margin:var(--gem-sys-spacing--s)0;-webkit-padding-start:var(--gem-sys-spacing--xs);-moz-padding-start:var(--gem-sys-spacing--xs);padding-inline-start:var(--gem-sys-spacing--xs)}.markdown[_ngcontent-ng-c2479234063]>ol,.markdown[_ngcontent-ng-c2479234063]>ul{margin-bottom:var(--gem-sys-spacing--l)}.markdown[_ngcontent-ng-c2479234063] code{font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);font-variation-settings:var(--gem-sys-typography-type-scale--body-m-font-width);font-family:Google Sans Mono,monospace;color:var(--gem-sys-color--on-surface-variant);background-color:var(--gem-sys-color--surface-container-high);border-radius:6px;padding:1px 6px}@media screen and (min-width:600px){}@media only screen and (min-width:768px){}@-webkit-keyframes _ngcontent-ng-c2479234063_fade-in-text{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c2479234063_fade-in-text{0%{opacity:0}to{opacity:1}}</style><style>[_nghost-ng-c1437408396]{color:var(--gem-sys-color--on-surface)}.code-block[_ngcontent-ng-c1437408396]{border-radius:12px;position:relative;margin:16px 0}.code-block[_ngcontent-ng-c1437408396] pre[_ngcontent-ng-c1437408396]{margin:0}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396]{color:var(--gem-sys-color--on-surface-variant);background-color:transparent;display:block;overflow-x:auto;direction:ltr}.code-block[_ngcontent-ng-c1437408396] code.formatted[_ngcontent-ng-c1437408396]{font:400 .875rem/1.3125rem Google Sans Code,monospace;padding:16px}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-comment{color:var(--bard-color-code-comment)}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-literal{color:var(--bard-color-code-literal)}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-string{color:var(--bard-color-code-string)}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-built_in{color:var(--bard-color-code-quotes-and-meta)}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-keyword{color:var(--bard-color-code-keyword)}.code-block[_ngcontent-ng-c1437408396] code[_ngcontent-ng-c1437408396] .hljs-meta{color:var(--bard-color-code-quotes-and-meta)}.code-block[_ngcontent-ng-c1437408396] .code-container[_ngcontent-ng-c1437408396]{border-radius:0}.code-block[_ngcontent-ng-c1437408396] .code-block-decoration[_ngcontent-ng-c1437408396]{color:var(--gem-sys-color--on-surface-variant);-webkit-padding-start:var(--gem-sys-spacing--l);-moz-padding-start:var(--gem-sys-spacing--l);padding-inline-start:var(--gem-sys-spacing--l);min-height:var(--gem-sys-spacing--xxl);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;top:-16px;z-index:1;position:-webkit-sticky;position:sticky}.code-block[_ngcontent-ng-c1437408396] .code-block-decoration.header-formatted[_ngcontent-ng-c1437408396]{background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-spacing--l) var(--gem-sys-spacing--l) var(--gem-sys-spacing--xs) var(--gem-sys-spacing--xs);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--l);margin-top:var(--gem-sys-spacing--xs);margin-bottom:2px;height:32px}.code-block[_ngcontent-ng-c1437408396] .formatted-code-block-internal-container[_ngcontent-ng-c1437408396]{background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--xs) var(--gem-sys-spacing--l) var(--gem-sys-spacing--l)}</style><div style="display:none"></div><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKRLL9S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --><chat-app id="app-root" ng-version="0.0.0-PLACEHOLDER" _nghost-ng-c514563478 class="ng-tns-c514563478-0"><main _ngcontent-ng-c514563478 class="chat-app"><div _ngcontent-ng-c514563478 data-test-id="chat-app" class="side-nav-menu-button with-pill-ui"><!----><!----><bard-mode-switcher _ngcontent-ng-c514563478 data-test-id="bard-mode-switcher" _nghost-ng-c2384344551 class="ng-tns-c514563478-0 no-menu-button ng-trigger ng-trigger-modeSwitcherHoverToOpenAnimation ng-star-inserted" style="transform:translateX(0px)"><!----><span _ngcontent-ng-c2384344551 class="bard-logo-container logo-only ng-star-inserted" style><bard-logo _ngcontent-ng-c2384344551 data-test-id="bard-logo-only" _nghost-ng-c1291545120><div _ngcontent-ng-c1291545120 data-test-id="logo" class="logo"><span _ngcontent-ng-c1291545120 data-test-id="bard-text" class="bard-text enable-aurora ng-star-inserted"> Gemini </span><!----><!----></div></bard-logo></span><!----><!----><!----><!----><!----><!----><!----></bard-mode-switcher><!----><!----><!----></div><!----><side-navigation-v2 _ngcontent-ng-c514563478 class="content" _nghost-ng-c2318972578><chat-notifications _ngcontent-ng-c2318972578 _nghost-ng-c3157396549><!----><!----><!----><!----></chat-notifications><!----><bard-sidenav-container _ngcontent-ng-c2318972578 data-test-id="bard-sidenav-container" _nghost-ng-c3522183994><!----><bard-sidenav-content _ngcontent-ng-c2318972578 _nghost-ng-c24741362 aria-hidden="false"><div _ngcontent-ng-c2318972578 class="desktop-ogb-buffer"></div><div _ngcontent-ng-c2318972578 class="content-wrapper"><div _ngcontent-ng-c514563478 class="main-content ng-trigger ng-trigger-routeChangeAnimation"><!----><!----><!----><!----><!----><div _ngcontent-ng-c514563478 class="content-container"><router-outlet _ngcontent-ng-c514563478></router-outlet><share-landing-page _nghost-ng-c3604425988 class="ng-star-inserted" style><!----><!----><section _ngcontent-ng-c3604425988 class="share-landing-page_content ng-star-inserted"><share-viewer _ngcontent-ng-c3604425988 _nghost-ng-c141276602 class="ng-tns-c141276602-1 ng-star-inserted" jslog="200474;track:impression;BardVeMetadataKey:[null,null,null,null,null,null,null,null,null,null,null,[&quot;471e96a06853&quot;]]"><section _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 share-viewer_header-container-old"><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 top-container ng-star-inserted"><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 share-title-section"><div _ngcontent-ng-c141276602 class="title-link ng-tns-c141276602-1"><!----><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 link-flag ng-star-inserted"><a _ngcontent-ng-c141276602 target="_blank" class="gds-body-l share-link ng-tns-c141276602-1" href="https://g.co/gemini/share/471e96a06853"> https://g.co/gemini/share/471e96a06853 </a><div _ngcontent-ng-c141276602 class="link-action-buttons ng-tns-c141276602-1"><!----><!----><!----><!----></div></div><!----><div _ngcontent-ng-c141276602 class="gds-title-s publish-time ng-tns-c141276602-1 ng-star-inserted"><span _ngcontent-ng-c141276602 class="publish-time-mode ng-tns-c141276602-1"><!----><!----><span _ngcontent-ng-c141276602 data-test-id="created-with-bard-mode-from-config" class="ng-tns-c141276602-1 ng-star-inserted"> Created with <strong _ngcontent-ng-c141276602 class="ng-tns-c141276602-1">2.5 Flash</strong></span><!----><!----><!----><span _ngcontent-ng-c141276602 class="ng-tns-c141276602-1"> March 21, 2025 at 05:35 PM </span></span><span _ngcontent-ng-c141276602 class="publish-time-text ng-tns-c141276602-1">Published August 13, 2025 at 10:40 PM</span></div><!----></div></div></div><!----></section><!----><section _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 share-viewer_chat-container"><!----><!----><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 chat-history ng-star-inserted"><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 ng-star-inserted"><!----><share-turn-viewer _ngcontent-ng-c141276602 _nghost-ng-c262668468 class="ng-tns-c141276602-1 ng-star-inserted" style><div _ngcontent-ng-c262668468 class="share-turn-viewer ng-star-inserted"><user-query _ngcontent-ng-c262668468 _nghost-ng-c1411839970 class="ng-star-inserted"><span _ngcontent-ng-c1411839970 class="user-query-container right-align-content"><!----><user-query-content _ngcontent-ng-c1411839970 class="user-query-container" _nghost-ng-c3309000207><div _ngcontent-ng-c3309000207 class="user-query-container user-query-bubble-container ng-star-inserted"><div _ngcontent-ng-c3309000207 class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c3309000207 class="query-content ng-star-inserted" id="user-query-content-0"><!----><!----><!----><span _ngcontent-ng-c3309000207 class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c3309000207 class="horizontal-container"><div _ngcontent-ng-c3309000207 role="heading" aria-level="2" class="query-text gds-body-l" dir="ltr"><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> ```js <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // ==UserScript== <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @name &nbsp; &nbsp; &nbsp; &nbsp;[NTUT Portal/iStudy] Login redirect <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @namespace &nbsp; Violentmonkey Scripts <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @match &nbsp; &nbsp; &nbsp; https://nportal.ntut.edu.tw/* <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @grant &nbsp; &nbsp; &nbsp; none <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @run-at &nbsp; &nbsp; &nbsp;document-start <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @version &nbsp; &nbsp; 1.0 <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @author &nbsp; &nbsp; &nbsp;陸嘉康 &lt;https://github.com/mon-jai&gt; <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @description Access NTUT Portal with "https://nportal.ntut.edu.tw/myPortal.do" and iStudy with "https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth", then get redirected after successful login <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // @homepage &nbsp; &nbsp;https://github.com/mon-jai/ntut-violentmonkey-scripts <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> // ==/UserScript== <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> "use strict" <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> const isAuthenticatedPromise = new Promise(resolve =&gt; { <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; const resolvePromise = () =&gt; { <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; if (document.documentElement.outerHTML.includes("重新登入")) resolve(false) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; else resolve(true) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; } <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; if (document.readyState === "complete") resolvePromise() <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; else document.addEventListener("readystatechange", resolvePromise) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> }) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> isAuthenticatedPromise.then(isAuthenticated =&gt; { <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; const { pathname } = document.location <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; if (!isAuthenticated) { <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; if (pathname === "/ssoIndex.do") sessionStorage.setItem("redirect-to-istudy", true) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; if (pathname === "/myPortal.do") sessionStorage.removeItem("redirect-to-istudy") <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; document.documentElement.style.display = "none" <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; document.location.replace("https://nportal.ntut.edu.tw/index.do") <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; return <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; } <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; if (pathname !== "/myPortal.do") { <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; const isRedirectRequired = JSON.parse(sessionStorage.getItem("redirect-to-istudy")) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; if (isRedirectRequired === null || isRedirectRequired === false) return <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c3309000207 class="ng-star-inserted"><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // Redirect to iStudy on successful login <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; sessionStorage.removeItem("redirect-to-istudy") <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; &nbsp; document.location.replace("https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth") <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> &nbsp; } <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> }) <!----><!----></p><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> ``` <!----><!----></p><!----></div><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span></user-query><!----><response-container _ngcontent-ng-c262668468 class="response-container ng-tns-c2240677105-2 reduced-bottom-padding ng-star-inserted" _nghost-ng-c2240677105><div _ngcontent-ng-c2240677105 class="response-container ng-tns-c2240677105-2 response-container-with-gpi ng-star-inserted" jslog="173900;track:impression,attention"><!----><!----><div _ngcontent-ng-c2240677105 class="response-container-header ng-tns-c2240677105-2 ng-star-inserted"><div _ngcontent-ng-c2240677105 class="response-container-header-controls ng-tns-c2240677105-2"><div _ngcontent-ng-c2240677105 class="ng-tns-c2240677105-2 tts ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c2240677105 class="single-draft-response-container ng-tns-c2240677105-2"><!----></div></div><!----><tts-control _ngcontent-ng-c2240677105 _nghost-ng-c1672677784 class="ng-tns-c2240677105-2 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c1672677784 class="response-tts-container ng-star-inserted" data-test-draft-id="rc_f9639abb8a3f16fb" style="height:2148px"><div _ngcontent-ng-c1672677784 data-test-id="disabled-tooltip" class="mat-mdc-tooltip-trigger tts-button-container mat-mdc-tooltip-disabled"><!----><!----></div><!----></div><!----><div _ngcontent-ng-c1672677784 role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c1672677784 yposition="below" xposition="after" class><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c2240677105 class="response-container-header-status ng-tns-c2240677105-2"><!----><div _ngcontent-ng-c2240677105 class="response-container-header-processing-state ng-tns-c2240677105-2"></div></div><!----></div><!----><div _ngcontent-ng-c2240677105 class="presented-response-container ng-tns-c2240677105-2"><div _ngcontent-ng-c2240677105 class="avatar-gutter ng-tns-c2240677105-2 ng-star-inserted"><bard-avatar _ngcontent-ng-c2240677105 class="avatar-component ng-tns-c3516966969-3 ng-tns-c2240677105-2 ng-star-inserted" _nghost-ng-c3516966969><div _ngcontent-ng-c3516966969 bardavataranimationscontroller class="bard-avatar ng-tns-c3516966969-3"><div _ngcontent-ng-c3516966969 class="avatar-container ng-tns-c3516966969-3 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c3516966969 class="avatar avatar_primary ng-tns-c3516966969-3 ng-star-inserted" style><div _ngcontent-ng-c3516966969 class="avatar_primary_model ng-tns-c3516966969-3 is-gpi-avatar"><div _ngcontent-ng-c3516966969 lottie-animation class="avatar_primary_animation is-gpi-avatar ng-tns-c3516966969-3 aurora-enabled ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width:100%;height:100%;transform:translate3d(0px,0px,0px);content-visibility:visible"><defs><clippath id="__lottie_element_5"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_12"><g transform="matrix(0.12479999661445618,0,0,0.12479999661445618,4.986400604248047,4.986400604248047)" opacity="1" style="display:block"><g opacity="1" transform="matrix(1,0,0,1,88.25,88.25)"><path fill="url(#__lottie_element_15)" fill-opacity="1" d=" M-3.9000000953674316,-84.94999694824219 C-5.28000020980835,-79.47000122070312 -7.079999923706055,-74.13999938964844 -9.319999694824219,-68.93000030517578 C-15.15999984741211,-55.369998931884766 -23.15999984741211,-43.5 -33.33000183105469,-33.33000183105469 C-43.5,-23.170000076293945 -55.369998931884766,-15.15999984741211 -68.93000030517578,-9.319999694824219 C-74.12999725341797,-7.079999923706055 -79.47000122070312,-5.28000020980835 -84.94999694824219,-3.9000000953674316 C-86.73999786376953,-3.450000047683716 -88,-1.850000023841858 -88,0 C-88,1.850000023841858 -86.73999786376953,3.450000047683716 -84.94999694824219,3.9000000953674316 C-79.47000122070312,5.28000020980835 -74.13999938964844,7.079999923706055 -68.93000030517578,9.319999694824219 C-55.369998931884766,15.15999984741211 -43.5099983215332,23.15999984741211 -33.33000183105469,33.33000183105469 C-23.15999984741211,43.5 -15.149999618530273,55.369998931884766 -9.319999694824219,68.93000030517578 C-7.079999923706055,74.12999725341797 -5.28000020980835,79.47000122070312 -3.9000000953674316,84.94999694824219 C-3.450000047683716,86.73999786376953 -1.840000033378601,88 0,88 C1.850000023841858,88 3.450000047683716,86.73999786376953 3.9000000953674316,84.94999694824219 C5.28000020980835,79.47000122070312 7.079999923706055,74.13999938964844 9.319999694824219,68.93000030517578 C15.15999984741211,55.369998931884766 23.15999984741211,43.5099983215332 33.33000183105469,33.33000183105469 C43.5,23.15999984741211 55.369998931884766,15.149999618530273 68.93000030517578,9.319999694824219 C74.12999725341797,7.079999923706055 79.47000122070312,5.28000020980835 84.94999694824219,3.9000000953674316 C86.73999786376953,3.450000047683716 88,1.840000033378601 88,0 C88,-1.850000023841858 86.73999786376953,-3.450000047683716 84.94999694824219,-3.9000000953674316 C79.47000122070312,-5.28000020980835 74.13999938964844,-7.079999923706055 68.93000030517578,-9.319999694824219 C55.369998931884766,-15.15999984741211 43.5099983215332,-23.15999984741211 33.33000183105469,-33.33000183105469 C23.15999984741211,-43.5 15.149999618530273,-55.369998931884766 9.319999694824219,-68.93000030517578 C7.079999923706055,-74.12999725341797 5.28000020980835,-79.47000122070312 3.9000000953674316,-84.94999694824219 C3.450000047683716,-86.73999786376953 1.850000023841858,-88 0,-88 C-1.850000023841858,-88 -3.450000047683716,-86.73999786376953 -3.9000000953674316,-84.94999694824219z"></path></g></g></g><path d=" M84.8499984741211,3.799999952316284 C83.47000122070312,9.279999732971191 81.66999816894531,14.609999656677246 79.43000030517578,19.81999969482422 C73.58999633789062,33.380001068115234 65.58999633789062,45.25 55.41999816894531,55.41999816894531 C45.25,65.58000183105469 33.380001068115234,73.58999633789062 19.81999969482422,79.43000030517578 C14.619999885559082,81.66999816894531 9.279999732971191,83.47000122070312 3.799999952316284,84.8499984741211 C2.009999990463257,85.30000305175781 0.75,86.9000015258789 0.75,88.75 C0.75,90.5999984741211 2.009999990463257,92.19999694824219 3.799999952316284,92.6500015258789 C9.279999732971191,94.02999877929688 14.609999656677246,95.83000183105469 19.81999969482422,98.06999969482422 C33.380001068115234,103.91000366210938 45.2400016784668,111.91000366210938 55.41999816894531,122.08000183105469 C65.58999633789062,132.25 73.5999984741211,144.1199951171875 79.43000030517578,157.67999267578125 C81.66999816894531,162.8800048828125 83.47000122070312,168.22000122070312 84.8499984741211,173.6999969482422 C85.30000305175781,175.49000549316406 86.91000366210938,176.75 88.75,176.75 C90.5999984741211,176.75 92.19999694824219,175.49000549316406 92.6500015258789,173.6999969482422 C94.02999877929688,168.22000122070312 95.83000183105469,162.88999938964844 98.06999969482422,157.67999267578125 C103.91000366210938,144.1199951171875 111.91000366210938,132.25999450683594 122.08000183105469,122.08000183105469 C132.25,111.91000366210938 144.1199951171875,103.9000015258789 157.67999267578125,98.06999969482422 C162.8800048828125,95.83000183105469 168.22000122070312,94.02999877929688 173.6999969482422,92.6500015258789 C175.49000549316406,92.19999694824219 176.75,90.58999633789062 176.75,88.75 C176.75,86.9000015258789 175.49000549316406,85.30000305175781 173.6999969482422,84.8499984741211 C168.22000122070312,83.47000122070312 162.88999938964844,81.66999816894531 157.67999267578125,79.43000030517578 C144.1199951171875,73.58999633789062 132.25999450683594,65.58999633789062 122.08000183105469,55.41999816894531 C111.91000366210938,45.25 103.9000015258789,33.380001068115234 98.06999969482422,19.81999969482422 C95.83000183105469,14.619999885559082 94.02999877929688,9.279999732971191 92.6500015258789,3.799999952316284 C92.19999694824219,2.009999990463257 90.5999984741211,0.75 88.75,0.75 C86.9000015258789,0.75 85.30000305175781,2.009999990463257 84.8499984741211,3.799999952316284" fill-opacity="1"></path><lineargradient id="__lottie_element_15" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-33" y1="26" x2="31" y2="-28"><stop offset="0%" stop-color="rgb(52,107,241)"></stop><stop offset="22%" stop-color="rgb(50,121,248)"></stop><stop offset="45%" stop-color="rgb(49,134,255)"></stop><stop offset="72%" stop-color="rgb(64,147,255)"></stop><stop offset="99%" stop-color="rgb(79,160,255)"></stop></lineargradient><lineargradient id="__lottie_element_19" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-33" y1="26" x2="31" y2="-28"><stop offset="0%" stop-color="rgb(52,107,241)"></stop><stop offset="22%" stop-color="rgb(50,121,248)"></stop><stop offset="45%" stop-color="rgb(49,134,255)"></stop><stop offset="72%" stop-color="rgb(64,147,255)"></stop><stop offset="99%" stop-color="rgb(79,160,255)"></stop></lineargradient><mask id="__lottie_element_12_1" mask-type="alpha"><use href="#__lottie_element_12"></use></mask></defs><g clip-path="url(#__lottie_element_5)"><g mask="url(#__lottie_element_12_1)" style="display:block"><g transform="matrix(0.12479999661445618,0,0,0.12479999661445618,4.986400604248047,4.986400604248047)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,88.25,88.25)"><path fill="url(#__lottie_element_19)" fill-opacity="1" d=" M-14.654000282287598,174.77099609375 C-14.654000282287598,174.77099609375 174.77099609375,14.654000282287598 174.77099609375,14.654000282287598 C174.77099609375,14.654000282287598 14.654000282287598,-174.77099609375 14.654000282287598,-174.77099609375 C14.654000282287598,-174.77099609375 -174.77099609375,-14.654000282287598 -174.77099609375,-14.654000282287598 C-174.77099609375,-14.654000282287598 -14.654000282287598,174.77099609375 -14.654000282287598,174.77099609375z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c3516966969 lottie-animation class="avatar_spinner_animation ng-tns-c3516966969-3 ng-star-inserted" style="opacity:0;visibility:hidden"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width:100%;height:100%;transform:translate3d(0px,0px,0px);content-visibility:visible"><defs><clippath id="__lottie_element_20"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_24" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_31" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_35" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_39" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_43" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_47" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-16" y1="0" x2="16" y2="0"><stop offset="0%" stop-color="rgb(49,134,255)"></stop><stop offset="50%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_20)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display:block"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_47)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_43)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_39)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_35)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_31)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_24)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c2240677105 class="response-container-content ng-tns-c2240677105-2"><!----><!----><!----><!----><!----><!----><message-content _ngcontent-ng-c262668468 class="message-content ng-star-inserted" _nghost-ng-c2479234063><div _ngcontent-ng-c2479234063 class="markdown markdown-main-panel tutor-markdown-rendering enable-updated-hr-color" id dir="ltr"><p>This is a well-structured and functional userscript designed to enhance the login experience for the NTUT Portal and iStudy. Here's a breakdown of what the script does:</p><p><b>Purpose:</b></p><p>The script aims to streamline the login process for users accessing the NTUT (National Taipei University of Technology) Portal and its integrated iStudy platform. It achieves this by:</p><ul><li><p><b>Remembering iStudy intent:</b> If a user tries to access the iStudy login page directly (<code>https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth</code>) while not logged in, the script stores this intention in the session storage.</p></li><li><p><b>Redirecting to the main login:</b> Regardless of whether the user initially tried to access the portal or iStudy while logged out, they are redirected to the main NTUT Portal login page (<code>https://nportal.ntut.edu.tw/index.do</code>). The original page content is hidden during this redirect.</p></li><li><p><b>Automatic redirection after login:</b> After the user successfully logs in:</p><ul><li><p>If they initially tried to access the main portal (<code>https://nportal.ntut.edu.tw/myPortal.do</code>), they will remain on the main portal page.</p></li><li><p>If they initially tried to access iStudy, the script detects the stored intention and automatically redirects them to the iStudy platform.</p></li></ul></li></ul><p><b>Key Components and Functionality:</b></p><ol start="1"><li><p><b>Metadata Block (<code>// ==UserScript== ... // ==/UserScript==</code>)</b>: This section provides essential information about the userscript, such as its name, namespace, the websites it should run on (<code>@match</code>), permissions (<code>@grant</code>), when it should run (<code>@run-at</code>), version, author, description, and homepage.</p></li><li><p><b><code>"use strict"</code></b>: This directive enforces stricter parsing and error handling in the JavaScript code.</p></li><li><p><b><code>isAuthenticatedPromise</code></b>:</p><ul><li><p>This creates a Promise to determine if the user is currently authenticated on the NTUT Portal.</p></li><li><p>It checks for the presence of the text "重新登入" (Re-login) in the HTML. If this text exists, it's assumed the user is not logged in (as the option to re-login would be available).</p></li><li><p>The promise resolves <code>true</code> if "重新登入" is not found (assuming the user is logged in) and <code>false</code> otherwise.</p></li><li><p>It handles the case where the document might already be complete by checking <code>document.readyState</code>. If not complete, it adds an event listener for <code>readystatechange</code> to resolve the promise when the document loading is finished.</p></li></ul></li><li><p><b><code>isAuthenticatedPromise.then(isAuthenticated =&gt; { ... })</code></b>: This block executes once the <code>isAuthenticatedPromise</code> resolves, providing the <code>isAuthenticated</code> boolean value.</p></li><li><p><b>Handling Unauthenticated Users (<code>if (!isAuthenticated) { ... }</code>)</b>:</p><ul><li><p><b>Storing iStudy Intent:</b> If the user is not authenticated and the current path is <code>/ssoIndex.do</code> (the iStudy login page), it stores a flag (<code>redirect-to-istudy: true</code>) in the browser's <code>sessionStorage</code>. This remembers that the user intended to go to iStudy.</p></li><li><p><b>Removing iStudy Intent (on Portal):</b> If the user is not authenticated and the current path is <code>/myPortal.do</code> (the main portal page), it removes the <code>redirect-to-istudy</code> flag from <code>sessionStorage</code>. This is likely a cleanup step or handles cases where the user might have been redirected to the main portal login from iStudy previously.</p></li><li><p><b>Hiding Content and Redirecting:</b> The script hides the current page content by setting <code>document.documentElement.style.display = "none"</code> and then immediately redirects the browser to the main NTUT Portal login page (<code>https://nportal.ntut.edu.tw/index.do</code>) using <code>document.location.replace()</code>. The <code>replace()</code> method is used to prevent the user from navigating back to the intermediate hidden page.</p></li><li><p><b>Early Return:</b> The <code>return</code> statement here prevents the rest of the code within the <code>then</code> block from executing when the user is not authenticated.</p></li></ul></li><li><p><b>Handling Authenticated Users (<code>if (pathname !== "/myPortal.do") { ... }</code>)</b>:</p><ul><li><p>This block executes if the user is authenticated (<code>isAuthenticated</code> is <code>true</code>) and the current path is not the main portal page (<code>/myPortal.do</code>). This condition likely covers scenarios where the user might be on a temporary page after logging in or directly accessing a specific portal function before being fully redirected.</p></li><li><p><b>Checking for iStudy Redirection:</b> It retrieves the <code>redirect-to-istudy</code> flag from <code>sessionStorage</code> and parses it as a boolean using <code>JSON.parse()</code>.</p></li><li><p><b>Conditional Redirection to iStudy:</b> If <code>isRedirectRequired</code> is <code>true</code> (meaning the user intended to go to iStudy before logging in):</p><ul><li><p><b>Removing the Flag:</b> The <code>redirect-to-istudy</code> flag is removed from <code>sessionStorage</code> to prevent redundant redirects on subsequent visits.</p></li><li><p><b>Redirecting to iStudy:</b> The browser is redirected to the iStudy platform login page (<code>https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth</code>) using <code>document.location.replace()</code>.</p></li></ul></li></ul></li></ol><p><b>In summary, this userscript provides a more seamless login experience for NTUT Portal and iStudy users by remembering their intended destination (iStudy) before login and automatically redirecting them there after successful authentication.</b></p></div></message-content><!----><!----><!----><!----><!----></div></div><!----><div _ngcontent-ng-c2240677105 class="response-container-footer ng-tns-c2240677105-2"></div></div><!----></response-container><!----></div><!----><!----><!----><!----></share-turn-viewer><!----></div><div _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 ng-star-inserted"><!----><share-turn-viewer _ngcontent-ng-c141276602 _nghost-ng-c262668468 class="ng-tns-c141276602-1 ng-star-inserted" style><div _ngcontent-ng-c262668468 class="share-turn-viewer ng-star-inserted"><user-query _ngcontent-ng-c262668468 _nghost-ng-c1411839970 class="ng-star-inserted"><span _ngcontent-ng-c1411839970 class="user-query-container right-align-content"><!----><user-query-content _ngcontent-ng-c1411839970 class="user-query-container" _nghost-ng-c3309000207><div _ngcontent-ng-c3309000207 class="user-query-container user-query-bubble-container ng-star-inserted"><div _ngcontent-ng-c3309000207 class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c3309000207 class="query-content ng-star-inserted verticle-align-for-single-line-text" id="user-query-content-1"><!----><!----><!----><span _ngcontent-ng-c3309000207 class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c3309000207 class="horizontal-container"><div _ngcontent-ng-c3309000207 role="heading" aria-level="2" class="query-text gds-body-l" dir="ltr"><p _ngcontent-ng-c3309000207 class="query-text-line ng-star-inserted"> Do you think that the code logic can be improved? <!----><!----></p><!----></div><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span></user-query><!----><response-container _ngcontent-ng-c262668468 class="response-container ng-tns-c2240677105-4 reduced-bottom-padding ng-star-inserted" _nghost-ng-c2240677105><div _ngcontent-ng-c2240677105 class="response-container ng-tns-c2240677105-4 response-container-with-gpi ng-star-inserted" jslog="173900;track:impression,attention"><!----><!----><div _ngcontent-ng-c2240677105 class="response-container-header ng-tns-c2240677105-4 ng-star-inserted"><div _ngcontent-ng-c2240677105 class="response-container-header-controls ng-tns-c2240677105-4"><div _ngcontent-ng-c2240677105 class="ng-tns-c2240677105-4 tts ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c2240677105 class="single-draft-response-container ng-tns-c2240677105-4"><!----></div></div><!----><tts-control _ngcontent-ng-c2240677105 _nghost-ng-c1672677784 class="ng-tns-c2240677105-4 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c1672677784 class="response-tts-container ng-star-inserted" data-test-draft-id="rc_5549c5b480055cd8" style="height:3461px"><div _ngcontent-ng-c1672677784 data-test-id="disabled-tooltip" class="mat-mdc-tooltip-trigger tts-button-container mat-mdc-tooltip-disabled"><!----><!----></div><!----></div><!----><div _ngcontent-ng-c1672677784 role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c1672677784 yposition="below" xposition="after" class><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c2240677105 class="response-container-header-status ng-tns-c2240677105-4"><!----><div _ngcontent-ng-c2240677105 class="response-container-header-processing-state ng-tns-c2240677105-4"></div></div><!----></div><!----><div _ngcontent-ng-c2240677105 class="presented-response-container ng-tns-c2240677105-4"><div _ngcontent-ng-c2240677105 class="avatar-gutter ng-tns-c2240677105-4 ng-star-inserted"><bard-avatar _ngcontent-ng-c2240677105 class="avatar-component ng-tns-c3516966969-5 ng-tns-c2240677105-4 ng-star-inserted" _nghost-ng-c3516966969><div _ngcontent-ng-c3516966969 bardavataranimationscontroller class="bard-avatar ng-tns-c3516966969-5"><div _ngcontent-ng-c3516966969 class="avatar-container ng-tns-c3516966969-5 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c3516966969 class="avatar avatar_primary ng-tns-c3516966969-5 ng-star-inserted" style><div _ngcontent-ng-c3516966969 class="avatar_primary_model ng-tns-c3516966969-5 is-gpi-avatar"><div _ngcontent-ng-c3516966969 lottie-animation class="avatar_primary_animation is-gpi-avatar ng-tns-c3516966969-5 aurora-enabled ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width:100%;height:100%;transform:translate3d(0px,0px,0px);content-visibility:visible"><defs><clippath id="__lottie_element_48"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_55"><g transform="matrix(0.12479999661445618,0,0,0.12479999661445618,4.986400604248047,4.986400604248047)" opacity="1" style="display:block"><g opacity="1" transform="matrix(1,0,0,1,88.25,88.25)"><path fill="url(#__lottie_element_58)" fill-opacity="1" d=" M-3.9000000953674316,-84.94999694824219 C-5.28000020980835,-79.47000122070312 -7.079999923706055,-74.13999938964844 -9.319999694824219,-68.93000030517578 C-15.15999984741211,-55.369998931884766 -23.15999984741211,-43.5 -33.33000183105469,-33.33000183105469 C-43.5,-23.170000076293945 -55.369998931884766,-15.15999984741211 -68.93000030517578,-9.319999694824219 C-74.12999725341797,-7.079999923706055 -79.47000122070312,-5.28000020980835 -84.94999694824219,-3.9000000953674316 C-86.73999786376953,-3.450000047683716 -88,-1.850000023841858 -88,0 C-88,1.850000023841858 -86.73999786376953,3.450000047683716 -84.94999694824219,3.9000000953674316 C-79.47000122070312,5.28000020980835 -74.13999938964844,7.079999923706055 -68.93000030517578,9.319999694824219 C-55.369998931884766,15.15999984741211 -43.5099983215332,23.15999984741211 -33.33000183105469,33.33000183105469 C-23.15999984741211,43.5 -15.149999618530273,55.369998931884766 -9.319999694824219,68.93000030517578 C-7.079999923706055,74.12999725341797 -5.28000020980835,79.47000122070312 -3.9000000953674316,84.94999694824219 C-3.450000047683716,86.73999786376953 -1.840000033378601,88 0,88 C1.850000023841858,88 3.450000047683716,86.73999786376953 3.9000000953674316,84.94999694824219 C5.28000020980835,79.47000122070312 7.079999923706055,74.13999938964844 9.319999694824219,68.93000030517578 C15.15999984741211,55.369998931884766 23.15999984741211,43.5099983215332 33.33000183105469,33.33000183105469 C43.5,23.15999984741211 55.369998931884766,15.149999618530273 68.93000030517578,9.319999694824219 C74.12999725341797,7.079999923706055 79.47000122070312,5.28000020980835 84.94999694824219,3.9000000953674316 C86.73999786376953,3.450000047683716 88,1.840000033378601 88,0 C88,-1.850000023841858 86.73999786376953,-3.450000047683716 84.94999694824219,-3.9000000953674316 C79.47000122070312,-5.28000020980835 74.13999938964844,-7.079999923706055 68.93000030517578,-9.319999694824219 C55.369998931884766,-15.15999984741211 43.5099983215332,-23.15999984741211 33.33000183105469,-33.33000183105469 C23.15999984741211,-43.5 15.149999618530273,-55.369998931884766 9.319999694824219,-68.93000030517578 C7.079999923706055,-74.12999725341797 5.28000020980835,-79.47000122070312 3.9000000953674316,-84.94999694824219 C3.450000047683716,-86.73999786376953 1.850000023841858,-88 0,-88 C-1.850000023841858,-88 -3.450000047683716,-86.73999786376953 -3.9000000953674316,-84.94999694824219z"></path></g></g></g><path d=" M84.8499984741211,3.799999952316284 C83.47000122070312,9.279999732971191 81.66999816894531,14.609999656677246 79.43000030517578,19.81999969482422 C73.58999633789062,33.380001068115234 65.58999633789062,45.25 55.41999816894531,55.41999816894531 C45.25,65.58000183105469 33.380001068115234,73.58999633789062 19.81999969482422,79.43000030517578 C14.619999885559082,81.66999816894531 9.279999732971191,83.47000122070312 3.799999952316284,84.8499984741211 C2.009999990463257,85.30000305175781 0.75,86.9000015258789 0.75,88.75 C0.75,90.5999984741211 2.009999990463257,92.19999694824219 3.799999952316284,92.6500015258789 C9.279999732971191,94.02999877929688 14.609999656677246,95.83000183105469 19.81999969482422,98.06999969482422 C33.380001068115234,103.91000366210938 45.2400016784668,111.91000366210938 55.41999816894531,122.08000183105469 C65.58999633789062,132.25 73.5999984741211,144.1199951171875 79.43000030517578,157.67999267578125 C81.66999816894531,162.8800048828125 83.47000122070312,168.22000122070312 84.8499984741211,173.6999969482422 C85.30000305175781,175.49000549316406 86.91000366210938,176.75 88.75,176.75 C90.5999984741211,176.75 92.19999694824219,175.49000549316406 92.6500015258789,173.6999969482422 C94.02999877929688,168.22000122070312 95.83000183105469,162.88999938964844 98.06999969482422,157.67999267578125 C103.91000366210938,144.1199951171875 111.91000366210938,132.25999450683594 122.08000183105469,122.08000183105469 C132.25,111.91000366210938 144.1199951171875,103.9000015258789 157.67999267578125,98.06999969482422 C162.8800048828125,95.83000183105469 168.22000122070312,94.02999877929688 173.6999969482422,92.6500015258789 C175.49000549316406,92.19999694824219 176.75,90.58999633789062 176.75,88.75 C176.75,86.9000015258789 175.49000549316406,85.30000305175781 173.6999969482422,84.8499984741211 C168.22000122070312,83.47000122070312 162.88999938964844,81.66999816894531 157.67999267578125,79.43000030517578 C144.1199951171875,73.58999633789062 132.25999450683594,65.58999633789062 122.08000183105469,55.41999816894531 C111.91000366210938,45.25 103.9000015258789,33.380001068115234 98.06999969482422,19.81999969482422 C95.83000183105469,14.619999885559082 94.02999877929688,9.279999732971191 92.6500015258789,3.799999952316284 C92.19999694824219,2.009999990463257 90.5999984741211,0.75 88.75,0.75 C86.9000015258789,0.75 85.30000305175781,2.009999990463257 84.8499984741211,3.799999952316284" fill-opacity="1"></path><lineargradient id="__lottie_element_58" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-33" y1="26" x2="31" y2="-28"><stop offset="0%" stop-color="rgb(52,107,241)"></stop><stop offset="22%" stop-color="rgb(50,121,248)"></stop><stop offset="45%" stop-color="rgb(49,134,255)"></stop><stop offset="72%" stop-color="rgb(64,147,255)"></stop><stop offset="99%" stop-color="rgb(79,160,255)"></stop></lineargradient><lineargradient id="__lottie_element_62" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-33" y1="26" x2="31" y2="-28"><stop offset="0%" stop-color="rgb(52,107,241)"></stop><stop offset="22%" stop-color="rgb(50,121,248)"></stop><stop offset="45%" stop-color="rgb(49,134,255)"></stop><stop offset="72%" stop-color="rgb(64,147,255)"></stop><stop offset="99%" stop-color="rgb(79,160,255)"></stop></lineargradient><mask id="__lottie_element_55_1" mask-type="alpha"><use href="#__lottie_element_55"></use></mask></defs><g clip-path="url(#__lottie_element_48)"><g mask="url(#__lottie_element_55_1)" style="display:block"><g transform="matrix(0.12479999661445618,0,0,0.12479999661445618,4.986400604248047,4.986400604248047)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,88.25,88.25)"><path fill="url(#__lottie_element_62)" fill-opacity="1" d=" M-14.654000282287598,174.77099609375 C-14.654000282287598,174.77099609375 174.77099609375,14.654000282287598 174.77099609375,14.654000282287598 C174.77099609375,14.654000282287598 14.654000282287598,-174.77099609375 14.654000282287598,-174.77099609375 C14.654000282287598,-174.77099609375 -174.77099609375,-14.654000282287598 -174.77099609375,-14.654000282287598 C-174.77099609375,-14.654000282287598 -14.654000282287598,174.77099609375 -14.654000282287598,174.77099609375z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c3516966969 lottie-animation class="avatar_spinner_animation ng-tns-c3516966969-5 ng-star-inserted" style="opacity:0;visibility:hidden"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width:100%;height:100%;transform:translate3d(0px,0px,0px);content-visibility:visible"><defs><clippath id="__lottie_element_63"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_67" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_74" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_78" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_82" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_86" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_90" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-16" y1="0" x2="16" y2="0"><stop offset="0%" stop-color="rgb(49,134,255)"></stop><stop offset="50%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop><stop offset="100%" stop-color="rgb(49,134,255)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_63)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display:block"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_90)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_86)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_82)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_78)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_74)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display:none"><g><path stroke="url(#__lottie_element_67)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c2240677105 class="response-container-content ng-tns-c2240677105-4"><!----><!----><!----><!----><!----><!----><message-content _ngcontent-ng-c262668468 class="message-content ng-star-inserted" _nghost-ng-c2479234063><div _ngcontent-ng-c2479234063 class="markdown markdown-main-panel tutor-markdown-rendering enable-updated-hr-color" id dir="ltr"><p>Yes, the code logic can be improved in several aspects to make it more robust, readable, and maintainable. Here are some potential areas for improvement:</p><p><b>1. More Robust Authentication Check:</b></p><ul><li><p><b>Issue:</b> The current method relies on the presence of the text "重新登入" in the HTML to determine if the user is logged out. This is fragile because the text content of a website can change without notice, breaking the script.</p></li><li><p><b>Improvement:</b> Instead of relying on text content, a more robust approach would be to look for specific DOM elements that are present only when the user is logged in or logged out. For example:</p><ul><li><p><b>Logged Out:</b> Look for the presence of the login form or a specific login button.</p></li><li><p><b>Logged In:</b> Look for the presence of a user profile link, a logout button, or a specific dashboard element.</p></li></ul></li><li><p><b>Implementation:</b> You could use <code>document.querySelector()</code> to check for the existence of these elements.</p></li></ul><p><b>Example (Hypothetical - Replace selectors with actual ones from the NTUT Portal):</b></p><response-element class ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c1437408396 class="ng-tns-c1437408396-9 ng-star-inserted" style><!----><!----><div _ngcontent-ng-c1437408396 class="code-block ng-tns-c1437408396-9 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_c52d4d591d2d1ed1&quot;,&quot;c_f2bc532c48f27066&quot;,null,&quot;rc_5549c5b480055cd8&quot;,null,null,&quot;en&quot;,null,1,null,null,1,0]]" style="display:block"><div _ngcontent-ng-c1437408396 class="code-block-decoration header-formatted gds-title-s ng-tns-c1437408396-9 ng-star-inserted" style><span _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-9">JavaScript</span><div _ngcontent-ng-c1437408396 class="buttons ng-tns-c1437408396-9 ng-star-inserted"><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c1437408396 class="formatted-code-block-internal-container ng-tns-c1437408396-9"><div _ngcontent-ng-c1437408396 class="animated-opacity ng-tns-c1437408396-9"><pre _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-9"><code _ngcontent-ng-c1437408396 role="text" data-test-id="code-content" class="code-container formatted ng-tns-c1437408396-9"><span class="hljs-keyword">const</span> resolvePromise = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> isLoggedInElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#user-profile-link'</span>); <span class="hljs-comment">// Example selector for a logged-in element</span>
  <span class="hljs-keyword">const</span> isLoggedOutElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#login-button'</span>);   <span class="hljs-comment">// Example selector for a logged-out element</span>

  <span class="hljs-keyword">if</span> (isLoggedInElement) {
    resolve(<span class="hljs-literal">true</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isLoggedOutElement || <span class="hljs-built_in">document</span>.documentElement.outerHTML.includes(<span class="hljs-string">"重新登入"</span>)) {
    <span class="hljs-comment">// Keep the text check as a fallback or if specific elements are hard to identify</span>
    resolve(<span class="hljs-literal">false</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Handle cases where the status might not be immediately clear</span>
    <span class="hljs-comment">// You might want to add a delay or further checks here</span>
    resolve(<span class="hljs-literal">false</span>); <span class="hljs-comment">// Default to not authenticated for safety</span>
  }
};
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p><b>2. Simplified Redirect Check:</b></p><ul><li><p><b>Issue:</b> The condition <code>isRedirectRequired === null || isRedirectRequired === false</code> can be simplified.</p></li><li><p><b>Improvement:</b> Since you are setting the session storage item to <code>"true"</code> when a redirect is needed, you can directly check if the parsed value is strictly equal to <code>true</code>.</p></li><li><p><b>Implementation:</b></p></li></ul><response-element class ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c1437408396 class="ng-tns-c1437408396-10 ng-star-inserted" style><!----><!----><div _ngcontent-ng-c1437408396 class="code-block ng-tns-c1437408396-10 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_c52d4d591d2d1ed1&quot;,&quot;c_f2bc532c48f27066&quot;,null,&quot;rc_5549c5b480055cd8&quot;,null,null,&quot;en&quot;,null,1,null,null,1,0]]" style="display:block"><div _ngcontent-ng-c1437408396 class="code-block-decoration header-formatted gds-title-s ng-tns-c1437408396-10 ng-star-inserted" style><span _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-10">JavaScript</span><div _ngcontent-ng-c1437408396 class="buttons ng-tns-c1437408396-10 ng-star-inserted"><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c1437408396 class="formatted-code-block-internal-container ng-tns-c1437408396-10"><div _ngcontent-ng-c1437408396 class="animated-opacity ng-tns-c1437408396-10"><pre _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-10"><code _ngcontent-ng-c1437408396 role="text" data-test-id="code-content" class="code-container formatted ng-tns-c1437408396-10"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.parse(sessionStorage.getItem(<span class="hljs-string">"redirect-to-istudy"</span>)) === <span class="hljs-literal">true</span>) {
  <span class="hljs-comment">// ... redirect logic ...</span>
}
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p><b>3. Error Handling for <code>JSON.parse</code>:</b></p><ul><li><p><b>Issue:</b> If the value stored in <code>sessionStorage</code> for <code>"redirect-to-istudy"</code> is not a valid JSON string (though it should be in this case), <code>JSON.parse</code> could throw an error.</p></li><li><p><b>Improvement:</b> Wrap the <code>JSON.parse</code> call in a <code>try...catch</code> block to handle potential errors.</p></li><li><p><b>Implementation:</b> You've already implemented this in your thought process, which is a good improvement.</p></li></ul><p><b>4. Potential Race Condition with <code>document-start</code>:</b></p><ul><li><p><b>Consideration:</b> While <code>run-at: document-start</code> is good for early execution, the DOM might not be fully available when the script first runs. Your use of <code>readystatechange</code> handles this, but you could also consider using the <code>DOMContentLoaded</code> event, which fires when the initial HTML document has been completely loaded and parsed.</p></li></ul><p><b>5. Minor Code Style and Readability:</b></p><ul><li><p>While the code is generally readable, ensure consistent indentation and spacing.</p></li></ul><p><b>Here's the code with the suggested improvements (focusing on the authentication and redirect checks):</b></p><response-element class ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c1437408396 class="ng-tns-c1437408396-11 ng-star-inserted" style><!----><!----><div _ngcontent-ng-c1437408396 class="code-block ng-tns-c1437408396-11 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_c52d4d591d2d1ed1&quot;,&quot;c_f2bc532c48f27066&quot;,null,&quot;rc_5549c5b480055cd8&quot;,null,null,&quot;en&quot;,null,1,null,null,1,0]]" style="display:block"><div _ngcontent-ng-c1437408396 class="code-block-decoration header-formatted gds-title-s ng-tns-c1437408396-11 ng-star-inserted" style><span _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-11">JavaScript</span><div _ngcontent-ng-c1437408396 class="buttons ng-tns-c1437408396-11 ng-star-inserted"><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c1437408396 class="formatted-code-block-internal-container ng-tns-c1437408396-11"><div _ngcontent-ng-c1437408396 class="animated-opacity ng-tns-c1437408396-11"><pre _ngcontent-ng-c1437408396 class="ng-tns-c1437408396-11"><code _ngcontent-ng-c1437408396 role="text" data-test-id="code-content" class="code-container formatted ng-tns-c1437408396-11"><span class="hljs-comment">// ==UserScript==</span>
<span class="hljs-comment">// @name    [NTUT Portal/iStudy] Login redirect</span>
<span class="hljs-comment">// @namespace Violentmonkey Scripts</span>
<span class="hljs-comment">// @match   https://nportal.ntut.edu.tw/*</span>
<span class="hljs-comment">// @grant   none</span>
<span class="hljs-comment">// @run-at  document-start</span>
<span class="hljs-comment">// @version 1.1</span>
<span class="hljs-comment">// @author  陸嘉康 &lt;https://github.com/mon-jai&gt;</span>
<span class="hljs-comment">// @description Access NTUT Portal with "https://nportal.ntut.edu.tw/myPortal.do" and iStudy with "https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth", then get redirected after successful login</span>
<span class="hljs-comment">// @homepage https://github.com/mon-jai/ntut-violentmonkey-scripts</span>
<span class="hljs-comment">// ==/UserScript==</span>
<span class="hljs-meta">
"use strict"</span>

<span class="hljs-keyword">const</span> isAuthenticatedPromise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> resolvePromise = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// More robust authentication check (replace selectors with actual ones)</span>
    <span class="hljs-keyword">const</span> isLoggedInElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#user-profile-link'</span>); <span class="hljs-comment">// Example</span>
    <span class="hljs-keyword">const</span> isLoggedOutElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#login-button'</span>);   <span class="hljs-comment">// Example</span>

    <span class="hljs-keyword">if</span> (isLoggedInElement) {
      resolve(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isLoggedOutElement || <span class="hljs-built_in">document</span>.documentElement.outerHTML.includes(<span class="hljs-string">"重新登入"</span>)) {
      resolve(<span class="hljs-literal">false</span>);
    } <span class="hljs-keyword">else</span> {
      resolve(<span class="hljs-literal">false</span>); <span class="hljs-comment">// Default to not authenticated</span>
    }
  };

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.readyState === <span class="hljs-string">"complete"</span>) {
    resolvePromise();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"readystatechange"</span>, resolvePromise);
  }
});

isAuthenticatedPromise.then(<span class="hljs-function"><span class="hljs-params">isAuthenticated</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> { pathname } = <span class="hljs-built_in">document</span>.location;

  <span class="hljs-keyword">if</span> (!isAuthenticated) {
    <span class="hljs-keyword">if</span> (pathname === <span class="hljs-string">"/ssoIndex.do"</span>) {
      sessionStorage.setItem(<span class="hljs-string">"redirect-to-istudy"</span>, <span class="hljs-string">"true"</span>);
    }
    <span class="hljs-keyword">if</span> (pathname === <span class="hljs-string">"/myPortal.do"</span>) {
      sessionStorage.removeItem(<span class="hljs-string">"redirect-to-istudy"</span>);
    }

    <span class="hljs-built_in">document</span>.documentElement.style.display = <span class="hljs-string">"none"</span>;
    <span class="hljs-built_in">document</span>.location.replace(<span class="hljs-string">"https://nportal.ntut.edu.tw/index.do"</span>);

    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (pathname !== <span class="hljs-string">"/myPortal.do"</span>) {
    <span class="hljs-keyword">let</span> isRedirectRequired = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">try</span> {
      isRedirectRequired = <span class="hljs-built_in">JSON</span>.parse(sessionStorage.getItem(<span class="hljs-string">"redirect-to-istudy"</span>));
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error parsing redirect-to-istudy from sessionStorage:"</span>, e);
      isRedirectRequired = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// Simplified check for redirect requirement</span>
    <span class="hljs-keyword">if</span> (isRedirectRequired === <span class="hljs-literal">true</span>) {
      sessionStorage.removeItem(<span class="hljs-string">"redirect-to-istudy"</span>);
      <span class="hljs-built_in">document</span>.location.replace(<span class="hljs-string">"https://nportal.ntut.edu.tw/ssoIndex.do?apOu=ischool_plus_oauth"</span>);
    }
  }
});
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p><b>Key Takeaway:</b> The most significant improvement would be to move away from relying on text content for determining authentication status and instead use more reliable DOM element checks. You will need to inspect the NTUT Portal's HTML source code to identify suitable selectors for elements that indicate the logged-in and logged-out states.</p></div></message-content><!----><!----><!----><!----><!----></div></div><!----><div _ngcontent-ng-c2240677105 class="response-container-footer ng-tns-c2240677105-4"></div></div><!----></response-container><!----></div><!----><!----><!----><!----></share-turn-viewer><!----></div><!----></div><!----></section><section _ngcontent-ng-c141276602 class="ng-tns-c141276602-1 share-viewer_legal-links" style="padding-top:0px"><!----><!----></section><section _ngcontent-ng-c141276602 class="share-viewer_footer ng-tns-c141276602-1"></section><!----></share-viewer><!----><!----></section><!----><!----><!----><!----></share-landing-page><!----><!----></div></div><!----></div></bard-sidenav-content></bard-sidenav-container><!----><!----><!----><!----></side-navigation-v2><!----><!----><!----><!----></main><!----><!----><!----><!----></chat-app><div class="cdk-live-announcer-element cdk-visually-hidden" aria-atomic="true" aria-live="polite" id="cdk-live-announcer-0"></div><div ng-non-bindable></div><div class="cdk-describedby-message-container cdk-visually-hidden" style="visibility:hidden"><div id="cdk-describedby-message-ng-1-2" role="tooltip">Copy public link</div><div id="cdk-describedby-message-ng-1-3" role="tooltip">Report</div></div></body></html>